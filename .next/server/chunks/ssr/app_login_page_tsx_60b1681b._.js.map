{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Vizantu.dev/RifaBrasil/app/login/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useForm } from 'react-hook-form';\r\nimport { zodResolver } from '@hookform/resolvers/zod';\r\nimport { z } from 'zod';\r\nimport { supabase } from '@/utils/supabase';\r\n\r\nconst loginSchema = z.object({\r\n  email: z.string().email('Email inválido'),\r\n  password: z.string().min(6, 'A senha deve ter no mínimo 6 caracteres'),\r\n});\r\n\r\nconst registerSchema = z.object({\r\n  name: z.string().min(1, 'Nome é obrigatório'),\r\n  email: z.string().email('Email inválido'),\r\n  phone: z\r\n    .string()\r\n    .min(11, 'Telefone deve ter 11 dígitos')\r\n    .max(11, 'Telefone deve ter 11 dígitos')\r\n    .regex(/^\\d+$/, 'Telefone deve conter apenas números'),\r\n  password: z.string().min(6, 'A senha deve ter no mínimo 6 caracteres'),\r\n  confirmPassword: z.string().min(6, 'Confirme sua senha'),\r\n}).refine((data) => data.password === data.confirmPassword, {\r\n  message: \"As senhas não coincidem\",\r\n  path: [\"confirmPassword\"],\r\n});\r\n\r\ntype LoginFormValues = z.infer<typeof loginSchema>;\r\ntype RegisterFormValues = z.infer<typeof registerSchema>;\r\n\r\nexport default function LoginPage() {\r\n  const router = useRouter();\r\n  const [isLogin, setIsLogin] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const loginForm = useForm<LoginFormValues>({\r\n    resolver: zodResolver(loginSchema),\r\n    defaultValues: {\r\n      email: '',\r\n      password: '',\r\n    },\r\n  });\r\n\r\n  const registerForm = useForm<RegisterFormValues>({\r\n    resolver: zodResolver(registerSchema),\r\n    defaultValues: {\r\n      name: '',\r\n      email: '',\r\n      phone: '',\r\n      password: '',\r\n      confirmPassword: '',\r\n    },\r\n  });\r\n\r\n  const handleLogin = async (data: LoginFormValues) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const { error } = await supabase.auth.signInWithPassword({\r\n        email: data.email,\r\n        password: data.password,\r\n      });\r\n\r\n      if (error) throw error;\r\n      \r\n      router.push('/participar');\r\n      router.refresh();\r\n    } catch (error: any) {\r\n      setError(error.message || 'Falha no login. Verifique suas credenciais.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRegister = async (data: RegisterFormValues) => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      const { error } = await supabase.auth.signUp({\r\n        email: data.email,\r\n        password: data.password,\r\n        options: {\r\n          data: {\r\n            name: data.name,\r\n            phone: data.phone,\r\n          },\r\n        },\r\n      });\r\n\r\n      if (error) throw error;\r\n      \r\n      // Mostrar mensagem de sucesso\r\n      alert('Cadastro realizado com sucesso! Verifique seu email para confirmar sua conta.');\r\n      setIsLogin(true);\r\n    } catch (error: any) {\r\n      setError(error.message || 'Falha no cadastro. Tente novamente.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto mt-10 mb-10 p-6 bg-white rounded-lg shadow-md\">\r\n      <h1 className=\"text-2xl font-bold text-center text-blue-600 mb-6\">\r\n        {isLogin ? 'Faça login na sua conta' : 'Crie sua conta'}\r\n      </h1>\r\n      \r\n      {error && (\r\n        <div className=\"mb-4 p-3 bg-red-100 text-red-700 rounded\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      \r\n      {isLogin ? (\r\n        <form onSubmit={loginForm.handleSubmit(handleLogin)} className=\"space-y-4\">\r\n          <div>\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700\">Email</label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"email\"\r\n              {...loginForm.register('email')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {loginForm.formState.errors.email && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{loginForm.formState.errors.email.message}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">Senha</label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              {...loginForm.register('password')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {loginForm.formState.errors.password && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{loginForm.formState.errors.password.message}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Aguarde...' : 'Entrar'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      ) : (\r\n        <form onSubmit={registerForm.handleSubmit(handleRegister)} className=\"space-y-4\">\r\n          <div>\r\n            <label htmlFor=\"name\" className=\"block text-sm font-medium text-gray-700\">Nome completo</label>\r\n            <input\r\n              id=\"name\"\r\n              type=\"text\"\r\n              {...registerForm.register('name')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {registerForm.formState.errors.name && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{registerForm.formState.errors.name.message}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"register-email\" className=\"block text-sm font-medium text-gray-700\">Email</label>\r\n            <input\r\n              id=\"register-email\"\r\n              type=\"email\"\r\n              {...registerForm.register('email')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {registerForm.formState.errors.email && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{registerForm.formState.errors.email.message}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700\">Telefone (apenas números)</label>\r\n            <input\r\n              id=\"phone\"\r\n              type=\"tel\"\r\n              placeholder=\"11987654321\"\r\n              inputMode=\"numeric\"\r\n              {...registerForm.register('phone')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {registerForm.formState.errors.phone && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{registerForm.formState.errors.phone.message}</p>\r\n            )}\r\n            <p className=\"mt-1 text-xs text-gray-500\">Digite apenas os números, incluindo DDD (11 dígitos)</p>\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"register-password\" className=\"block text-sm font-medium text-gray-700\">Senha</label>\r\n            <input\r\n              id=\"register-password\"\r\n              type=\"password\"\r\n              {...registerForm.register('password')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {registerForm.formState.errors.password && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{registerForm.formState.errors.password.message}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <label htmlFor=\"confirm-password\" className=\"block text-sm font-medium text-gray-700\">Confirmar senha</label>\r\n            <input\r\n              id=\"confirm-password\"\r\n              type=\"password\"\r\n              {...registerForm.register('confirmPassword')}\r\n              className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500\"\r\n            />\r\n            {registerForm.formState.errors.confirmPassword && (\r\n              <p className=\"mt-1 text-sm text-red-600\">{registerForm.formState.errors.confirmPassword.message}</p>\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Aguarde...' : 'Cadastrar'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      )}\r\n      \r\n      <div className=\"mt-6 text-center\">\r\n        <button\r\n          type=\"button\"\r\n          onClick={() => setIsLogin(!isLogin)}\r\n          className=\"text-blue-600 hover:text-blue-800 font-medium\"\r\n        >\r\n          {isLogin ? 'Não tem uma conta? Cadastre-se' : 'Já tem uma conta? Faça login'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}