(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[49],{1796:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(5155),r=t(2115),i=t(6874),l=t.n(i),n=t(5522);function d(){let[e,s]=(0,r.useState)(!0),[t,i]=(0,r.useState)(null),[d,o]=(0,r.useState)([]),[c,m]=(0,r.useState)([]);return((0,r.useEffect)(()=>{(async()=>{try{s(!0);let{data:e,error:t}=await n.N.from("raffles").select("\n            *,\n            winner:participants!raffles_winner_id_fkey(name, chosen_numbers)\n          ").eq("status","completed").order("drawn_at",{ascending:!1});if(t)throw t;let{data:a,error:r}=await n.N.from("raffles").select("*").in("status",["open","closed"]).order("created_at",{ascending:!1});if(r)throw r;o(e||[]),m(a||[])}catch(e){console.error("Erro ao buscar sorteios:",e),i(e.message||"Erro ao carregar os sorteios")}finally{s(!1)}})()},[]),e)?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto mt-8 mb-12 px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-center text-blue-600 mb-10",children:"Resultados dos Sorteios"}),t&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md",children:t}),(0,a.jsxs)("div",{className:"mb-12",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Sorteios Realizados"}),0===d.length?(0,a.jsx)("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Ainda n\xe3o h\xe1 sorteios finalizados."})}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:d.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsx)("h3",{className:"font-bold text-lg mb-2",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"border-t border-gray-100 pt-4 mt-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-gray-700 mb-2",children:"Vencedor"}),e.winner?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-green-600",children:e.winner.name}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"N\xfameros escolhidos:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:e.winner.chosen_numbers.map(e=>(0,a.jsx)("span",{className:"inline-block px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs",children:e},e))})]})]}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"Informa\xe7\xe3o n\xe3o dispon\xedvel"})]}),(0,a.jsx)("div",{className:"text-right mt-4 text-sm text-gray-500",children:e.drawn_at?(0,a.jsxs)("span",{children:["Realizado em: ",new Date(e.drawn_at).toLocaleDateString("pt-BR")]}):null})]})},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Pr\xf3ximos Sorteios"}),0===c.length?(0,a.jsxs)("div",{className:"text-center py-10 bg-white rounded-lg shadow-sm",children:[(0,a.jsx)("p",{className:"text-gray-500",children:"N\xe3o h\xe1 sorteios programados no momento."}),(0,a.jsx)(l(),{href:"/participar",className:"inline-block mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Ver sorteios dispon\xedveis"})]}):(0,a.jsx)("div",{className:"grid gap-6 md:grid-cols-2",children:c.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsxs)("div",{className:"p-5",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h3",{className:"font-bold text-lg",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("open"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"open"===e.status?"Aberto":"Fechado"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-gray-500",children:[(0,a.jsxs)("span",{children:["N\xfameros: ",e.min_number," a ",e.max_number]}),(0,a.jsxs)("span",{children:["Criado em: ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]}),"open"===e.status&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(l(),{href:"/participar",className:"inline-block w-full text-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Participar"})})]})},e.id))})]})]})}},2265:(e,s,t)=>{Promise.resolve().then(t.bind(t,1796))},5522:(e,s,t)=>{"use strict";t.d(s,{N:()=>l});var a=t(851);let r="https://nkuadhiaeosakxxozxmc.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rdWFkaGlhZW9zYWt4eG96eG1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4OTQwMzAsImV4cCI6MjA2MDQ3MDAzMH0.SsjaoXLXHV6nOLpCuindrlJ7d1LUbyAteQjSK4Lp9QU";r&&i||console.warn("Vari\xe1veis de ambiente do Supabase n\xe3o definidas corretamente");let l=(0,a.UU)(r,i)}},e=>{var s=s=>e(e.s=s);e.O(0,[851,874,441,684,358],()=>s(2265)),_N_E=e.O()}]);