(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{5372:(e,s,t)=>{Promise.resolve().then(t.bind(t,7161))},5522:(e,s,t)=>{"use strict";t.d(s,{N:()=>i});var r=t(851);let a="https://nkuadhiaeosakxxozxmc.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5rdWFkaGlhZW9zYWt4eG96eG1jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ4OTQwMzAsImV4cCI6MjA2MDQ3MDAzMH0.SsjaoXLXHV6nOLpCuindrlJ7d1LUbyAteQjSK4Lp9QU";a&&n||console.warn("Vari\xe1veis de ambiente do Supabase n\xe3o definidas corretamente");let i=(0,r.UU)(a,n)},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},7161:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5155),a=t(2115),n=t(5695),i=t(6874),l=t.n(i),o=t(5522);function d(){let e=(0,n.useRouter)(),[s,t]=(0,a.useState)(!0),[i,d]=(0,a.useState)(null),[c,x]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[u,p]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{var s;let{data:t,error:r}=await o.N.auth.getSession();if(r)throw Error("Erro na autentica\xe7\xe3o: ".concat(r.message));let a=(null==(s=t.session)?void 0:s.user)||null;if(x(a),!a)return void e.push("/login");let{data:n,error:i}=await o.N.from("admin_users").select("*").eq("user_id",a.id);if(i)throw Error("Erro ao verificar permiss\xf5es de administrador: ".concat(i.message));if(!n||0===n.length)return void h(!1);h(!0);let{data:l,error:d}=await o.N.from("raffles").select("*").order("created_at",{ascending:!1});if(d)throw Error("Erro ao buscar sorteios: ".concat(d.message));p(l||[])}catch(e){console.error("Erro:",e),d(e.message||"Ocorreu um erro ao verificar suas permiss\xf5es"),h(!1)}finally{t(!1)}})()},[e]);let g=()=>{e.push("/admin/sorteios/novo")},j=e=>{switch(e){case"open":return"Aberto";case"closed":return"Fechado";case"completed":return"Finalizado";default:return e}},w=e=>{switch(e){case"open":return"bg-green-100 text-green-800";case"closed":return"bg-yellow-100 text-yellow-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return s?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-[80vh]",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-500"})}):m?(0,r.jsxs)("div",{className:"max-w-6xl mx-auto mt-8 mb-12 px-4",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-green-600",children:"Painel de Administra\xe7\xe3o"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerencie rifas, participantes e resultados"})]}),(0,r.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,r.jsx)("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Criar Nova Rifa"})})]}),i&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md",children:i}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border-t-4 border-green-600",children:[(0,r.jsx)("div",{className:"p-4 border-b bg-green-50",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-green-800",children:"Rifas"})}),0===u.length?(0,r.jsxs)("div",{className:"text-center py-10",children:[(0,r.jsx)("p",{className:"text-gray-500",children:"Nenhuma rifa encontrada"}),(0,r.jsx)("button",{onClick:g,className:"mt-4 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Criar Primeira Rifa"})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-green-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider",children:"T\xedtulo"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider",children:"N\xfameros"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider",children:"Data de Cria\xe7\xe3o"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-green-700 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-green-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,r.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(w(e.status)),children:j(e.status)})}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[e.min_number," a ",e.max_number]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString("pt-BR")}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,r.jsx)(l(),{href:"/admin/sorteios/".concat(e.id),className:"text-green-600 hover:text-green-900 mr-4",children:"Detalhes"}),"open"===e.status&&(0,r.jsx)(l(),{href:"/admin/sorteios/".concat(e.id,"/fechar"),className:"text-yellow-600 hover:text-yellow-900 mr-4",children:"Fechar"}),"closed"===e.status&&(0,r.jsx)(l(),{href:"/admin/sorteios/".concat(e.id,"/sorteio"),className:"text-green-600 hover:text-green-900",children:"Sortear"})]})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border-t-4 border-yellow-400",children:[(0,r.jsx)("div",{className:"p-4 border-b bg-green-50",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-green-800",children:"Menu R\xe1pido"})}),(0,r.jsx)("div",{className:"p-4",children:(0,r.jsxs)("ul",{className:"space-y-2",children:[(0,r.jsx)("li",{children:(0,r.jsxs)(l(),{href:"/admin/participantes",className:"text-green-600 hover:text-green-800 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Ver Todos os Participantes"]})}),(0,r.jsx)("li",{children:(0,r.jsxs)(l(),{href:"/admin/exportar",className:"text-green-600 hover:text-green-800 flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Dados"]})}),(0,r.jsx)("li",{children:(0,r.jsxs)(l(),{href:"/admin/configuracoes",className:"text-green-600 hover:text-green-800 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Configura\xe7\xf5es"]})})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border-t-4 border-green-600",children:[(0,r.jsx)("div",{className:"p-4 border-b bg-green-50",children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-green-800",children:"Estat\xedsticas"})}),(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4 p-3 bg-green-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-green-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Total de Rifas"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-800",children:u.length})]})]}),(0,r.jsx)(l(),{href:"/admin/sorteios",className:"text-green-600 hover:text-green-800 text-sm",children:"Ver todas"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-yellow-500 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Rifas Ativas"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-800",children:u.filter(e=>"open"===e.status).length})]})]}),(0,r.jsx)(l(),{href:"/admin/sorteios?status=open",className:"text-yellow-600 hover:text-yellow-800 text-sm",children:"Ver ativas"})]})]})]})]})]}):(0,r.jsxs)("div",{className:"max-w-md mx-auto mt-10 p-6 bg-white rounded-lg shadow-md border-t-4 border-green-600",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-center mb-6 text-green-700",children:"Acesso Restrito"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6 text-center",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta \xe1rea administrativa."}),i&&(0,r.jsx)("div",{className:"mb-6 p-4 bg-red-100 text-red-700 rounded-md text-sm",children:i}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(l(),{href:"/",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Voltar para o in\xedcio"})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[851,874,441,684,358],()=>s(5372)),_N_E=e.O()}]);