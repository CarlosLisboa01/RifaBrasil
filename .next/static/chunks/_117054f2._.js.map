{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Vizantu.dev/RifaBrasil/utils/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\n// Obter as variáveis de ambiente ou usar valores padrão\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || '';\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || '';\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  console.warn('Variáveis de ambiente do Supabase não definidas corretamente');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\nexport const getServiceSupabase = () => {\r\n  return createClient(\r\n    supabaseUrl,\r\n    supabaseAnonKey\r\n  );\r\n}; "],"names":[],"mappings":";;;;AAGoB;AAHpB;;AAEA,wDAAwD;AACxD,MAAM,cAAc,gFAAwC;AAC5D,MAAM,kBAAkB,wPAA6C;AAErE,uCAAsC;;AAEtC;AAEO,MAAM,WAAW,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAAE,aAAa;AAE3C,MAAM,qBAAqB;IAChC,OAAO,CAAA,GAAA,0LAAA,CAAA,eAAY,AAAD,EAChB,aACA;AAEJ","debugId":null}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file://D%3A/Vizantu.dev/RifaBrasil/components/Header.tsx"],"sourcesContent":["'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useState, useEffect } from 'react';\r\nimport { supabase } from '@/utils/supabase';\r\n\r\nexport default function Header() {\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Verificar se o usuário está logado e se é admin\r\n    const checkAuth = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        const { data: sessionData, error } = await supabase.auth.getSession();\r\n        \r\n        if (error) {\r\n          console.error(\"Erro ao verificar sessão:\", error);\r\n          setIsLoggedIn(false);\r\n          setIsAdmin(false);\r\n          return;\r\n        }\r\n        \r\n        const currentUser = sessionData.session?.user;\r\n        \r\n        if (!currentUser) {\r\n          setIsLoggedIn(false);\r\n          setIsAdmin(false);\r\n          return;\r\n        }\r\n        \r\n        setIsLoggedIn(true);\r\n        \r\n        // Verificar se é admin apenas se estiver logado\r\n        const { data: adminData, error: adminError } = await supabase\r\n          .from('admin_users')\r\n          .select('*')\r\n          .eq('user_id', currentUser.id);\r\n          \r\n        if (adminError) {\r\n          console.error(\"Erro ao verificar permissões de admin:\", adminError);\r\n          setIsAdmin(false);\r\n          return;\r\n        }\r\n        \r\n        setIsAdmin(!!adminData && adminData.length > 0);\r\n      } catch (err) {\r\n        console.error(\"Erro inesperado:\", err);\r\n        setIsAdmin(false);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    checkAuth();\r\n    \r\n    // Adicionar um listener para mudanças de autenticação\r\n    const { data: authListener } = supabase.auth.onAuthStateChange((_event, session) => {\r\n      setIsLoggedIn(!!session);\r\n      \r\n      if (!session) {\r\n        setIsAdmin(false);\r\n      } else {\r\n        // Verificar se é admin novamente\r\n        checkAuth();\r\n      }\r\n    });\r\n    \r\n    return () => {\r\n      // Limpar listener ao desmontar\r\n      if (authListener && authListener.subscription) {\r\n        authListener.subscription.unsubscribe();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <header className=\"bg-white shadow-sm border-t-4 border-green-600\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between h-16\">\r\n          <div className=\"flex items-center\">\r\n            <Link href=\"/\" className=\"flex-shrink-0 flex items-center\">\r\n              <span className=\"text-2xl font-bold text-green-600\">RifaBrasil</span>\r\n              <span className=\"ml-2 text-xs bg-yellow-400 text-green-800 px-2 py-1 rounded-full font-bold\">Oficial</span>\r\n            </Link>\r\n          </div>\r\n          \r\n          <div className=\"hidden sm:ml-6 sm:flex sm:items-center sm:space-x-8\">\r\n            <Link href=\"/\" className=\"px-3 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-green-50\">\r\n              Início\r\n            </Link>\r\n            <Link href=\"/participar\" className=\"px-3 py-2 rounded-md text-sm font-medium text-gray-900 hover:bg-green-50\">\r\n              Participar\r\n            </Link>\r\n            \r\n            {isLoggedIn && isAdmin && !isLoading && (\r\n              <Link \r\n                href=\"/admin\" \r\n                className=\"px-3 py-2 rounded-md text-sm font-medium bg-red-600 text-white hover:bg-red-700\"\r\n              >\r\n                Administrador\r\n              </Link>\r\n            )}\r\n            \r\n            <Link \r\n              href={isLoggedIn ? \"/minha-conta\" : \"/login\"}\r\n              className=\"ml-4 px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700\"\r\n            >\r\n              {isLoggedIn ? 'Minha Conta' : 'Entrar'}\r\n            </Link>\r\n          </div>\r\n          \r\n          <div className=\"-mr-2 flex items-center sm:hidden\">\r\n            <button\r\n              onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n              className=\"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-green-500\"\r\n            >\r\n              <span className=\"sr-only\">Abrir menu</span>\r\n              {isMenuOpen ? (\r\n                <svg className=\"block h-6 w-6\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n              ) : (\r\n                <svg className=\"block h-6 w-6\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 6h16M4 12h16M4 18h16\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {isMenuOpen && (\r\n        <div className=\"sm:hidden\">\r\n          <div className=\"pt-2 pb-3 space-y-1\">\r\n            <Link href=\"/\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-green-50\">\r\n              Início\r\n            </Link>\r\n            <Link href=\"/participar\" className=\"block px-3 py-2 rounded-md text-base font-medium text-gray-900 hover:bg-green-50\">\r\n              Participar\r\n            </Link>\r\n            \r\n            {isLoggedIn && isAdmin && !isLoading && (\r\n              <Link \r\n                href=\"/admin\" \r\n                className=\"block px-3 py-2 rounded-md text-base font-medium bg-red-600 text-white hover:bg-red-700\"\r\n              >\r\n                Administrador\r\n              </Link>\r\n            )}\r\n            \r\n            <Link \r\n              href={isLoggedIn ? \"/minha-conta\" : \"/login\"}\r\n              className=\"block w-full text-center mt-3 px-4 py-2 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-green-600 hover:bg-green-700\"\r\n            >\r\n              {isLoggedIn ? 'Minha Conta' : 'Entrar'}\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}